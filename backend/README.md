<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [Database][1]
    *   [getDbModule][2]
        *   [Parameters][3]
    *   [init][4]
    *   [db][5]
*   [Logging][6]
    *   [initLogging][7]
        *   [Parameters][8]
    *   [getLogger][9]
        *   [Parameters][10]
    *   [logErrorsOnly][11]
*   [Database migration][12]
    *   [runMigration][13]
        *   [Parameters][14]

## Database



### getDbModule

Constructs new object containing `init` function and `db` object

#### Parameters

*   `dbConfig` **DbConfig** DB configuration object
*   `loggerFactory` **LoggerFactory** object containing `getLogger` function
*   `modelFactories` **ModelFactories** array of factory functions returning sequelize model

Returns **DbModule** DB module

### init

Initializes DB connection

Returns **[Promise][15]\<void>** promise resolving once connection is established

### db

Once initialized this object contains `sequelize` instance as well as all DB models, keyed by model name.

Type: Db

## Logging



### initLogging

Initializes logging framework according to the given config

#### Parameters

*   `config` **LoggerConfig** configuration object
*   `defaultMaxListeners` **[number][16]** optional number of default event listeners to be assigned to
    EventEmitter.defaultMaxListeners, should be set to at least the number of logging categories to be used, defaults to 30 (optional, default `30`)

Returns **LoggerFactory** object containing `getLogger` and `logErrorsOnly` functions

### getLogger

Returns logger for given category

#### Parameters

*   `category` **[string][17]** category

Returns **[Object][18]** winston logger instance

### logErrorsOnly

Sets threshold log level to `error`

## Database migration



### runMigration

Runs migration script

#### Parameters

*   `loggerFactory` **[Object][18]** initialized logger factory, see [initLogging][7]
*   `dbModule` **DbModule** DB module, an object containing `init` function and `db` object, see [DbModule][19]

Returns **void** 

[1]: #database

[2]: #getdbmodule

[3]: #parameters

[4]: #init

[5]: #db

[6]: #logging

[7]: #initlogging

[8]: #parameters-1

[9]: #getlogger

[10]: #parameters-2

[11]: #logerrorsonly

[12]: #database-migration

[13]: #runmigration

[14]: #parameters-3

[15]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[16]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[17]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[18]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[19]: DbModule
