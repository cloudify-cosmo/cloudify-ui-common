<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [Database][1]
    *   [DbInitializer][2]
        *   [Parameters][3]
    *   [init][4]
    *   [db][5]
*   [Logging][6]
    *   [initLogging][7]
        *   [Parameters][8]
    *   [getLogger][9]
        *   [Parameters][10]
    *   [logErrorsOnly][11]
*   [Database migration][12]
    *   [runMigration][13]
        *   [Parameters][14]

## Database



### DbInitializer

Constructs new object containing `init` function and `db` object

#### Parameters

*   `dbConfig` **[Object][15]** DB configuration object

    *   `dbConfig.url` **([string][16] | [Array][17])** DB connection URL or an array of URLs
    *   `dbConfig.options` **[Object][15]** DB connection options
*   `loggerFactory` **[Object][15]** object containing `getLogger` function
*   `models` **[Array][17]<(function (Sequelize, Sequelize.DataTypes): Sequelize.Model)>** array of functions returning sequelize model

### init

Initializes DB connection

Returns **[Promise][18]\<void>** promise resolving once connection is established

### db

Once initialized this object contains `sequelize` instance as well as all DB models, keyed by model name.

## Logging



### initLogging

Initializes logging framework according to the given config

#### Parameters

*   `config` **[Object][15]** configuration object

    *   `config.logLevelConf` **[string][16]** path to manager's logging.conf file
    *   `config.logLevel` **[string][16]** default log level to be used when `logLevelConf` is not set, file defined by
        `logLevelConf` does not exist, or the file exists but contains no entry for the given `serviceName`
    *   `config.logsFile` **[string][16]** path to main log file
    *   `config.errorsFile` **[string][16]** path to errors log file
    *   `config.serviceName` **[string][16]** service name to look for in file specified by \`logLevelConf
*   `defaultMaxListeners` **[number][19]** optional number of default event listeners to be assigned to
    EventEmitter.defaultMaxListeners, should be set to at least the number of logging categories to be used, defaults to 30 (optional, default `30`)

Returns **[Object][15]** object containing `getLogger` and `logErrorsOnly` functions

### getLogger

Returns logger for given category

#### Parameters

*   `category` **[string][16]** category

Returns **[Object][15]** winston logger instance

### logErrorsOnly

Sets threshold log level to `error`

## Database migration



### runMigration

Runs migration script

#### Parameters

*   `loggerFactory` **[Object][15]** initialized logger factory, see [initLogging][7]
*   `dbModule` **[Object][15]** DB module, an object containing `init` function and `db` object, see [DbInitializer][2]

[1]: #database

[2]: #dbinitializer

[3]: #parameters

[4]: #init

[5]: #db

[6]: #logging

[7]: #initlogging

[8]: #parameters-1

[9]: #getlogger

[10]: #parameters-2

[11]: #logerrorsonly

[12]: #database-migration

[13]: #runmigration

[14]: #parameters-3

[15]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[16]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[17]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[18]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[19]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
